{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["export default class FilterBuilder {\n  constructor(data) {\n    this.data = data;\n    this.query = '';\n  }\n\n  where(...query) {\n    this.makeAnd();\n    if (typeof query[0] === 'function') {\n      this.query += '(';\n      query[0](this);\n      this.query += ')';\n    } else {\n      if (query.length === 1) {\n        this.query += `(item.${query[0]})`;\n      } else if (query.length === 2) {\n        this.query += `(item.${query[0]} == ${typeof query[1] === 'string' ? '\"' + query[1] + '\"' : query[1]})`;\n      } else if (query.length === 3) {\n        this.query += `(item.${query[0]} ${query[1]} ${typeof query[2] === 'string' ? '\"' + query[2] + '\"' : query[2]})`;\n      }\n    }\n    return this;\n  }\n\n  orWhere(...query) {\n    this.query += ' || ';\n    return this.where(...query);\n  }\n\n  whereIncludes(list, key, value = null) {\n    this.makeAnd();\n    if (value == null) {\n      this.query += `(item.${list} ? item.${list}.includes('${key}') : false)`;\n      return this;\n    }\n    this.query += `(item.${list} ? item.${list}.some(element => element.${key} === '${value}') : false)`;\n    return this;\n  }\n\n  orWhereIncludes(list, key, value = null) {\n    this.query += ' || ';\n    this.whereIncludes(list, key, value);\n    return this;\n  }\n\n  whereContains(key, value) {\n    this.makeAnd();\n    this.query += `(item.${key} ? item.${key}.toLowerCase().includes('${value.toLowerCase()}') : false)`;\n    return this;\n  }\n\n  orWhereContains(key, value) {\n    this.query += ' || ';\n    this.whereContains(key, value);\n    return this;\n  }\n\n  whereIn(key, list) {\n    this.makeAnd();\n    this.query += `(item.${key} ? [\"${list.join(\n      '\", \"',\n    )}\"].includes('' + item.${key}) : false)`;\n    return this;\n  }\n\n  orWhereIn(key, list) {\n    this.query += ' || ';\n    this.whereIn(key, list);\n    return this;\n  }\n\n  makeAnd() {\n    if (this.query.slice(-1).includes(')')) {\n      this.query += ' && ';\n    }\n  }\n\n  stripEmpties() {\n    this.query = this.query.replace(/&& \\(\\)/g, '');\n    this.query = this.query.replace(/\\(\\)\\s\\s&&/g, '');\n    this.query = this.query.replace(/\\(\\)\\s&&/g, '');\n  }\n\n  get() {\n    this.stripEmpties();\n    return this.data.filter((item) => new Function('item', `'use strict';return ${this.query};`)(item));\n  }\n}\n"],"names":["FilterBuilder","data","this","query","where","slice","call","arguments","makeAnd","length","orWhere","apply","whereIncludes","list","key","value","orWhereIncludes","whereContains","toLowerCase","orWhereContains","whereIn","join","orWhereIn","includes","stripEmpties","replace","get","_this","filter","item","Function"],"mappings":"4BACE,WAAA,SAAAA,EAAYC,GACVC,KAAKD,KAAOA,EACZC,KAAKC,MAAQ,8BAGfC,MAAA,WAAgB,IAAPD,EACP,GAAAE,MAAAC,KAAAC,WAcA,OAdAL,KAAKM,UACmB,mBAAbL,EAAM,IACfD,KAAKC,OAAS,IACdA,EAAM,GAAGD,MACTA,KAAKC,OAAS,KAEO,IAAjBA,EAAMM,OACRP,KAAKC,OAAkBA,SAAAA,EAAM,GAC9B,IAA2B,IAAjBA,EAAMM,OACfP,KAAKC,OAAL,SAAuBA,EAAM,GAA7B,QAA0D,iBAAbA,EAAM,GAAkB,IAAMA,EAAM,GAAK,IAAMA,EAAM,IACnG,IAA2B,IAAjBA,EAAMM,SACfP,KAAKC,OAAL,SAAuBA,EAAM,OAAMA,EAAM,GAAM,KAAoB,iBAAbA,EAAM,GAAkB,IAAMA,EAAM,GAAK,IAAMA,EAAM,IAA3G,KAILD,MAEDQ,EAAAA,QAAA,WAEE,OADAR,KAAKC,OAAS,OACPD,KAAKE,MACbO,MAAAT,KAAA,GAAAG,MAAAC,KAAAC,aAEDK,EAAAA,cAAA,SAAcC,EAAMC,EAAKC,GAEvB,gBAFuBA,IAAAA,EAAQ,MAC/Bb,KAAKM,UACQ,MAATO,GACFb,KAAKC,OAAkBU,SAAAA,EAAeA,WAAAA,EAAkBC,cAAAA,EACxD,cACDZ,OACDA,KAAKC,OAAkBU,SAAAA,aAAeA,EAAtC,4BAAsEC,EAAtE,SAAkFC,EAAlF,cACOb,SAGTc,gBAAA,SAAgBH,EAAMC,EAAKC,GAGzB,gBAHyBA,IAAAA,EAAQ,MACjCb,KAAKC,OAAS,OACdD,KAAKU,cAAcC,EAAMC,EAAKC,GAE/Bb,QAEDe,cAAA,SAAcH,EAAKC,GAGjB,OAFAb,KAAKM,UACLN,KAAKC,OAAL,SAAuBW,EAAcA,WAAAA,EAA+BC,4BAAAA,EAAMG,cAA1E,cACOhB,QAGTiB,gBAAA,SAAgBL,EAAKC,GAGnB,OAFAb,KAAKC,OAAS,OACdD,KAAKe,cAAcH,EAAKC,GACjBb,QAGTkB,QAAA,SAAQN,EAAKD,GAKX,OAJAX,KAAKM,UACLN,KAAKC,OAAkBW,SAAAA,EAAWD,QAAAA,EAAKQ,KACrC,QADF,0BAE0BP,EAC1B,aACDZ,MAEDoB,EAAAA,UAAA,SAAUR,EAAKD,GAGb,OAFAX,KAAKC,OAAS,OACdD,KAAKkB,QAAQN,EAAKD,GAEnBX,QAEDM,QAAA,WACMN,KAAKC,MAAME,OAAO,GAAGkB,SAAS,OAChCrB,KAAKC,OAAS,SAIlBqB,EAAAA,aAAA,WACEtB,KAAKC,MAAQD,KAAKC,MAAMsB,QAAQ,WAAY,IAC5CvB,KAAKC,MAAQD,KAAKC,MAAMsB,QAAQ,cAAe,IAC/CvB,KAAKC,MAAQD,KAAKC,MAAMsB,QAAQ,YAAa,OAG/CC,IAAA,WAAM,IAAAC,EAAAzB,KAEJ,OADAA,KAAKsB,eACEtB,KAAKD,KAAK2B,OAAO,SAACC,GAAS,OAAA,IAAIC,SAAS,OAAb,uBAA4CH,EAAKxB,MAAjD,IAAA,CAA2D0B,QApF/F"}