{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["export class FilterBuilder {\n  constructor(data, options = {}) {\n    this.data = data;\n    this.query = \"\";\n  }\n\n  where(...query) {\n    this.makeAnd();\n    if (typeof query[0] === \"function\") {\n      this.query += \"(\";\n      query[0](this);\n      this.query += \")\";\n    } else {\n      if (query.length === 1) {\n        this.query += `(item.${query[0]})`;\n      } else if (query.length === 2) {\n        this.query += `(item.${query[0]} == ${typeof query[1] === 'string' ? \"'\" + query[1] + \"'\" : query[1]})`;\n      } else if (query.length === 3) {\n        this.query += `(item.${query[0]} ${query[1]} ${typeof query[2] === 'string' ? \"'\" + query[2] + \"'\" : query[2]})`;\n      }\n    }\n    return this;\n  }\n\n  orWhere(...query) {\n    this.query += \" || \";\n    return this.where(...query);\n  }\n\n  whereIncludes(list, key, value = null) {\n    this.makeAnd();\n    if (value == null) {\n      this.query += `(item.${list} ? item.${list}.includes('${key}') : false)`;\n      return this;\n    }\n    this.query += `(item.${list} ? item.${list}.some(element => element.${key} === '${value}') : false)`;\n    return this;\n  }\n\n  orWhereIncludes(list, key, value = null) {\n    this.query += \" || \";\n    this.whereIncludes(list, key, value);\n    return this;\n  }\n\n  whereContains(key, value) {\n    this.makeAnd();\n    this.query += `(item.${key} ? item.${key}.toLowerCase().includes('${value.toLowerCase()}') : false)`;\n    return this;\n  }\n\n  orWhereContains(key, value) {\n    this.query += \" || \";\n    this.whereContains(key, value);\n    return this;\n  }\n\n  whereIn(key, list) {\n    this.makeAnd();\n    this.query += `(item.${key} ? ['${list.join(\n      \"', '\"\n    )}'].includes(\"\" + item.${key}) : false)`;\n    return this;\n  }\n\n  orWhereIn(key, list) {\n    this.query += \" || \";\n    this.whereIn(key, list);\n    return this;\n  }\n\n  makeAnd() {\n    if (this.query.slice(-1).includes(\")\")) {\n      this.query += \" && \";\n    }\n  }\n\n  stripEmpties() {\n    this.query = this.query.replace(/&& \\(\\)/g, \"\");\n    this.query = this.query.replace(/\\(\\)  &&/g, \"\");\n    this.query = this.query.replace(/\\(\\) &&/g, \"\");\n  }\n\n  get() {\n    this.stripEmpties();\n    return this.data.filter(item => {\n      return new Function(\"item\", `\"use strict\";return ${this.query};`)(item);\n    });\n  }\n}\n"],"names":["FilterBuilder","data","options","this","query","_proto","prototype","where","slice","call","arguments","makeAnd","length","orWhere","apply","whereIncludes","list","key","value","orWhereIncludes","whereContains","toLowerCase","orWhereContains","whereIn","join","orWhereIn","includes","stripEmpties","replace","get","filter","item","Function","_this"],"mappings":"iOAAaA,IAAAA,eAAb,WACE,SAAYC,EAAAA,EAAMC,GAChBC,KAAKF,KAAOA,EACZE,KAAKC,MAAQ,GAHjB,IAAAC,EAAAL,EAAAM,UAAA,OAAAD,EAMEE,MAAA,WAASH,IAAAA,EAAO,GAAAI,MAAAC,KAAAC,WAed,OAdAP,KAAKQ,UACmB,mBAAbP,EAAM,IACfD,KAAKC,OAAS,IACdA,EAAM,GAAGD,MACTA,KAAKC,OAAS,KAEO,IAAjBA,EAAMQ,OACRT,KAAKC,OAAkBA,SAAAA,EAAM,GAA7B,IAC0B,IAAjBA,EAAMQ,OACfT,KAAKC,OAAL,SAAuBA,EAAM,GAAS,QAAoB,iBAAbA,EAAM,GAAkB,IAAMA,EAAM,GAAK,IAAMA,EAAM,IAAlG,IAC0B,IAAjBA,EAAMQ,SACfT,KAAKC,gBAAkBA,EAAM,GAAMA,IAAAA,EAAM,GAAzC,KAAmE,iBAAbA,EAAM,GAAkB,IAAMA,EAAM,GAAK,IAAMA,EAAM,IAA3G,KAGGD,MArBXE,EAwBEQ,QAAA,WAEE,OADAV,KAAKC,OAAS,OACPD,KAAKI,MAALO,MAAAX,KAAA,GAAAK,MAAAC,KAAAC,aA1BXL,EA6BEU,cAAA,SAAcC,EAAMC,EAAKC,GAEvB,YAFuBA,IAAAA,IAAAA,EAAQ,MAC/Bf,KAAKQ,UACQ,MAATO,GACFf,KAAKC,OAAL,SAAuBY,EAAvB,WAAsCA,EAAtC,cAAwDC,EAAxD,cACOd,OAETA,KAAKC,OAAL,SAAuBY,EAAvB,WAAsCA,EAAtC,4BAAsEC,EAAtE,SAAkFC,EAAlF,cACOf,OApCXE,EAuCEc,gBAAA,SAAgBH,EAAMC,EAAKC,GAGzB,YAHyBA,IAAAA,IAAAA,EAAQ,MACjCf,KAAKC,OAAS,OACdD,KAAKY,cAAcC,EAAMC,EAAKC,GAE/Bf,MAEDiB,EAAAA,cAAA,SAAcH,EAAKC,GAGjB,OAFAf,KAAKQ,UACLR,KAAKC,OAAL,SAAuBa,EAAvB,WAAqCA,EAArC,4BAAoEC,EAAMG,cAC1E,cACDlB,QAEDmB,gBAAA,SAAgBL,EAAKC,GAGnB,OAFAf,KAAKC,OAAS,OACdD,KAAKiB,cAAcH,EAAKC,GAEzBf,MAEDoB,EAAAA,QAAA,SAAQN,EAAKD,GAKX,OAJAb,KAAKQ,UACLR,KAAKC,OAAL,SAAuBa,EAAvB,QAAkCD,EAAKQ,KACrC,QACwBP,0BAAAA,EAC1B,aACDd,MAEDsB,EAAAA,UAAA,SAAUR,EAAKD,GAGb,OAFAb,KAAKC,OAAS,OACdD,KAAKoB,QAAQN,EAAKD,GACXb,MAGTQ,EAAAA,QAAA,WACMR,KAAKC,MAAMI,OAAO,GAAGkB,SAAS,OAChCvB,KAAKC,OAAS,SAzEpBC,EA6EEsB,aAAA,WACExB,KAAKC,MAAQD,KAAKC,MAAMwB,QAAQ,WAAY,IAC5CzB,KAAKC,MAAQD,KAAKC,MAAMwB,QAAQ,YAAa,IAC7CzB,KAAKC,MAAQD,KAAKC,MAAMwB,QAAQ,WAAY,KAG9CC,EAAAA,IAAA,sBAEE,OADA1B,KAAKwB,eACO1B,KAAAA,KAAK6B,OAAO,SAAAC,GACtB,OAAWC,IAAAA,SAAS,OAAb,uBAA4CC,EAAK7B,MAAjD,IAAI4B,CAAuDD,MAtFxE/B,EAAA"}